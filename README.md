# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

## Сборка

```
npm run build
```


## Об архитектуре 

Взаимодействия внутри приложения происходят через события. Модели инициализируют события, слушатели событий в основном коде выполняют передачу данных компонентам отображения, а также вычислениями между этой передачей, и еще они меняют значения в моделях.


## Архитектура проекта:

### Базовые классы
1. **`Api`**  
Назначение:
Базовый класс для работы с внешним API. Он выполняет запросы на получение и отправку данных.
Функции:
get(url: string): Выполняет get запрос к серверу.
post(url: string, data: object, method: ApiPostMethods = 'POST'): Отправляет на сервер информацию.

1. **`ApiProduct` наследуется от `Api`**  
Назначение:
Расширяет функционал Api под задачи проекта.
Функции:
getProductById(url: string; id: number): Получает информацию о конкретном товаре по его идентификатору.

2. **`EventEmitter`**  
Назначение:
Этот класс реализует систему событий. Он позволяет подписываться на события и передавать данные между компонентами через события.
Функции:
subscribe(event: string, listener: Function): Подписывает слушателя на событие.
unsubscribe(event: string, listener: Function): Отписывает слушателя от события.
emit(event: string, data?: any): Вызывает событие и передаёт данные всем подписанным слушателям.

### Компоненты модели данных (бизнес-логика)

1. **`Order`**  
Назначение:
Компонент, который управляет корзиной пользователя. Хранит список товаров, добавленных в корзину, их количество и общую стоимость.
Содержит поля:
`payment`: 'онлайн' | 'при получении';
`items`: Array<Product>;
`phone`: string;
`address`: string;
`email`: string;
`total`: number;
Методы: 
`addProduct` - добавляет товар в корзину
`deleteProduct` - удаляет товар из корзины
`countTotal` - считает общую сумму товаров
`countQuantity` - считает количество товаров в корзине
`isEmpty` - проверяет наличие товаров в корзине
`isValid` - проверят корректность данных перед отправкой на сервер

2. **`Form`**  
Назначение:
Компонент для оформления заказа. Пользователь заполняет форму с контактными данными для завершения покупки.
Методы:
`isValidPayment` - Валидация введённых данных способа оплаты и адреса доставки.
`isValidContact` - Валидация корректно заполненных контактов

2. **`Product`**
Назначение:
Компонент товара, для проверки наличия товара в корзине и проверки наличия у товара стоимости.
Методы:
`inOrder` - проверяет, добавлен ли товар в корзину
`hasPrice` - проверят, есть ли у товара цена  


### Компоненты представления  

1. **`ProductListUI<T[]>`**  
Назначение:
Компонент отображает список всех товаров. Использует компонент `ProductCard` для рендеринга каждого товара.
Функции:
Рендерит набор карточек товаров на основе полученных данных.

2. **`ProductCardUI<T>`**
Назначение:
Компонент, который отображает отдельный товар, включая его название, цену и изображение. Содержит кнопку для добавления товара в корзину.
Функции:
Показывает информацию о продукте.

3. **`ProductCardFullUI<T>` наследуется от `ProductCardUI<T>`**
Назначение:
Компонент отображения карточки товара в модальном окне. Расширяет компонент, добавляя в него описания товара и кнопку `HTMLButtonElement`, меняющую своё состояни в зависимости от метода `inOrder`

4. **`OrderUI<T>`**
Назначение:
Компонент отображает список товаров в корзине, их общую стоимость из метода `countTotal` и кнопку `HTMLButtonElement`, меняющую своё состояни в зависимости от метода `isEmpty`

5. **`OrderItemUI<T>`**
Назначение:
Компонент отображает конкретный товар в корзине, его стоимость и кнопку `HTMLButtonElement` с методом `deleteProduct`

6. **`PaymentUI<T>`**
Назначение:
Компонент отоброжает выбор булевого значения поля `payment` и заполнения строкового значения `address` модели `Order`. Также содержит кнопку `HTMLButtonElement` меняющую своё состояния в зависимости от метода `isValidPayment`

7. **`ContactUI<T>`**
Назначение:
Компонент отоброжает ввод значения поля `phone` и заполнения строкового значения `email` модели `Order`. Также содержит кнопку `HTMLButtonElement` меняющую своё состояния в зависимости от метода `isValidContact`

### Получаемые типы данных

```ts
type Product = {
	id: number;
	name: string;
	title: string;
	description: string;
	price: number;
	image: string;
	category: string;
}
type ProductList = {
	products: Product[];
}
```

### События в приложении

**Главная страница**
Загрузить список товаров
Открыть корзину
Открыть модальное окно товара

**Модальное окно товара:**
Нажать кнопку “Купить”
Модальное окно корзины:
Удалить товар
Оформить заказ

**Модальное окно оформление:**
Выбрать способ оплаты
Ввести адрес доставки
Нажать кнопку “Далее”

**Модальное окно покупки:**
Указать почту
Указать телефон
Нажать кнопку “Оплатить”

